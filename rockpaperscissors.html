<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>rock paper scissors</title>
    </head>
    <body>
        <div class='results'>
            <h2>Rock Paper Scissors</h2>
            <h3>Make your selection</h3>
            <p></p>
        </div>
        <div>
            <!-- Image Map Generated by http://www.image-map.net/ -->
            <img src="./images/rockpaperscissors.png" usemap="#image-map">

            <map name="image-map">
                <area target="_self" alt="Rock" title="Rock" href="" onclick="return false" coords="182,230,69,117" shape="rect">
                <area target="_self" alt="Raper" title="Paper" href="" onclick="return false" coords="327,118,430,235" shape="rect">
                <area target="_self" alt="Scissors" title="Scissors" href="" onclick="return false" coords="570,119,680,248" shape="rect">
            </map>
        </div>
        <style>
            .results {
                text-align: center;
            }
            img {
                display: block;
                margin-left: auto;
                margin-right: auto;
            }
        </style>

        <script>
            //Game logic
            function computerPlay() {
                let hand = Math.floor(Math.random()*3);
                switch (hand) {
                    case 0: 
                        return "Rock";
                    case 1: 
                        return "Paper";
                    case 2:
                        return "Scissors";
                }
            }
            function playRound(playerSelection, computerSelection) {
                if (computerSelection == playerSelection) {
                    return [0, 0, `${playerSelection} vs ${computerSelection}: it's a tie! Try again!`];
                } else {
                    if (winConditions (playerSelection, computerSelection)) {
                        return [1, 0, `You win! ${playerSelection} beats ${computerSelection}!`];
                    } else {
                        return [0, 1, `You lose! ${computerSelection} beats ${playerSelection}!`];
                    }
                }
            }
            function winConditions(playerHand, computerHand) {
                if (computerHand == 'Rock' && playerHand == 'Paper') {
                    return true;
                } else if (computerHand == 'Paper' && playerHand == 'Scissors') {
                    return true;
                } else if (computerHand == 'Scissors' && playerHand == 'Rock') {
                    return true;
                } else {
                    return false;
                }
            }
            function game(thrownHand){
                let scores = [];
                const playerSelection = thrownHand;
                const computerSelection = computerPlay();
                scores = playRound(playerSelection, computerSelection);
                return scores;
            }

            //Control
            function initiate() { 
                let playerScore = 0;
                let computerScore = 0;
                const buttons = document.getElementsByName("image-map");
                buttons.forEach(button => {
                    button.addEventListener('click', e => {
                        const thrownHand = e.target.title;
                        let scoreArr = game(thrownHand);
                       
                        const div = document.querySelector('div.results');
                        const results = document.querySelector('p');
                
                        playerScore += scoreArr[0]
                        computerScore += scoreArr[1];

                        results.textContent = `${scoreArr[2]}. The score is: You-${playerScore} Computer-${computerScore}`;
                        div.appendChild(results);
                        
                        if (playerScore == 5 || computerScore == 5) {
                            let winner = (playerScore > computerScore) ? "You win the match!" 
                            : (computerScore > playerScore) ? "You lose the match!"
                            : "It's a tie!";

                            results.textContent = `${winner} You got ${playerScore}; the computer got ${computerScore}!`; 
                            div.appendChild(results);
                            return;
                        }

                    })
                })
            }
            initiate();            

        </script>
    </body>
</html>